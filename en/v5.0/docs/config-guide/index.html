<!--
 * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->





<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Cloud Native Stream Processor">
      
      
        <link rel="canonical" href="http://siddhi.io/en/v5.0/docs/config-guide/">
      
      
        <meta name="author" content="WSO2">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/logos/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Configuration Guide - Siddhi</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../assets/lib/highlightjs/default.min.css">
    
      <link rel="stylesheet" href="../../assets/css/theme.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-103065-28", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#siddhi-50-config-guide" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <!--
 * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->

<header class="md-header" data-md-component="header" id="page-header" data-url=""
        data-lang="en">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://siddhi.io/en/v5.0/" title="Siddhi"
           class="md-header-nav__button md-logo">
          
            <img src="../../images/logos/siddhi-logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Siddhi
            </span>
            <span class="md-header-nav__topic">
              Configuration Guide
            </span>
          
        </div>
        <div class="md-flex__ellipsis md-header__version-select">
            <div class="mb-tabs__dropdown version-select">
                <a class="md-tabs__link md-tabs__dropdown-link" href="#!" data-target="version-select-dropdown">
                  v5.0</a>
                <ul id="version-select-dropdown" class="mb-tabs__dropdown-content" tabindex="0">
                    <!-- Versions will added here dynamically -->
                    <li class="md-tabs__item mb-tabs__dropdown">
                        <a href="#" id="show-all-versions-link">Show all</a>
                    </li>
                </ul>
            </div>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          


  

<a href="https://github.com/siddhi-io/siddhi/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Siddhi
  </div>
</a>
        </div>
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
        <li class="md-tabs__item home_icon">
            <a href="/" title="Siddhi Home" class="md-tabs__link md-tabs__link--active">
                <i class="fa fa-home"></i>
            </a>
        </li>
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../download/" title="Download" class="md-tabs__link">
          Download
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../quick-start/" title="Quick Start" class="md-tabs__link">
          Quick Start
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../" title="Documentation" class="md-tabs__link md-tabs__link--active">
          Documentation
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="/community/" title="Community" class="md-tabs__link">
          Community
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../development/" title="Development" class="md-tabs__link">
          Development
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="/license/" title="License" class="md-tabs__link">
          License
        </a>
      
    </li>
  

      
    </ul>
    <div class="quick_links">
        
        <a href="https://github.com/siddhi-io/www/edit/v5.0/en/docs/docs/config-guide.md" target="blank" id="editIcon" title="Edit this page"
           title="Edit this page" class="md-icon md-content__icon nav_link edit_link"></a>
        
    </div>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
    <label class="md-nav__title md-nav__title--site" for="__drawer">
      <a href="http://siddhi.io/en/v5.0/" title="Siddhi"
         class="md-nav__button md-logo">
        
          <img src="../../images/logos/siddhi-logo.svg" width="48" height="48">
        
      </a>
      Siddhi
    </label>
    
      <div class="md-nav__source">
        


  

<a href="https://github.com/siddhi-io/siddhi/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Siddhi
  </div>
</a>
      </div>
    
    <ul class="md-nav__list" data-md-scrollfix>
      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Download
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Download
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../download/" title="Download" class="md-nav__link">
      Download
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extensions/" title="Extensions" class="md-nav__link">
      Extensions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/" title="Release Notes" class="md-nav__link">
      Release Notes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Quick Start
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Quick Start
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../quick-start/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../features/" title="Features" class="md-nav__link">
      Features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../quick-start/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tooling/" title="Tooling" class="md-nav__link">
      Tooling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../query-guide/" title="Query Guide" class="md-nav__link">
      Query Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-6" type="checkbox" id="nav-3-6">
    
    <label class="md-nav__link" for="nav-3-6">
      Siddhi APIs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-6">
        Siddhi APIs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api/latest/" title="latest" class="md-nav__link">
      latest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/5.0.0/" title="5.0.0" class="md-nav__link">
      5.0.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extensions/" title="Extensions" class="md-nav__link">
      Extensions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../siddhi-as-a-java-library/" title="Siddhi Java library" class="md-nav__link">
      Siddhi Java library
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../siddhi-as-a-local-microservice/" title="Siddhi Local Microservice" class="md-nav__link">
      Siddhi Local Microservice
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../siddhi-as-a-docker-microservice/" title="Siddhi Docker Microservice" class="md-nav__link">
      Siddhi Docker Microservice
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../siddhi-as-a-kubernetes-microservice/" title="Siddhi Kubernetes Microservice" class="md-nav__link">
      Siddhi Kubernetes Microservice
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Configuration Guide
      </label>
    
    <a href="./" title="Configuration Guide" class="md-nav__link md-nav__link--active">
      Configuration Guide
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">On this page</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuring-databases" title="Configuring Databases" class="md-nav__link">
    Configuring Databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-periodic-state-persistence" title="Configuring Periodic State Persistence" class="md-nav__link">
    Configuring Periodic State Persistence
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#persistence-on-database" title="Persistence on Database" class="md-nav__link">
    Persistence on Database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistence-on-file-system" title="Persistence on File System" class="md-nav__link">
    Persistence on File System
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-siddhi-elements" title="Configuring Siddhi Elements" class="md-nav__link">
    Configuring Siddhi Elements
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-sources-sinks-and-stores" title="Configuring Sources, Sinks and Stores" class="md-nav__link">
    Configuring Sources, Sinks and Stores
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-extensions" title="Configuring Extensions" class="md-nav__link">
    Configuring Extensions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-authentication" title="Configuring Authentication" class="md-nav__link">
    Configuring Authentication
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-extensions-and-third-party-dependencies" title="Adding Extensions and Third Party Dependencies" class="md-nav__link">
    Adding Extensions and Third Party Dependencies
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-to-siddhi-java-program" title="Adding to Siddhi Java Program" class="md-nav__link">
    Adding to Siddhi Java Program
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-to-siddhi-local-microservice" title="Adding to Siddhi Local Microservice" class="md-nav__link">
    Adding to Siddhi Local Microservice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-to-siddhi-docker-microservice" title="Adding to Siddhi Docker Microservice" class="md-nav__link">
    Adding to Siddhi Docker Microservice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-to-siddhi-kubernetes-microservice" title="Adding to Siddhi Kubernetes Microservice" class="md-nav__link">
    Adding to Siddhi Kubernetes Microservice
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-statistics" title="Configuring Statistics" class="md-nav__link">
    Configuring Statistics
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reporting-via-jmx-mbeans" title="Reporting via JMX Mbeans" class="md-nav__link">
    Reporting via JMX Mbeans
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reporting-via-console" title="Reporting via Console" class="md-nav__link">
    Reporting via Console
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reporting-via-database" title="Reporting via Database" class="md-nav__link">
    Reporting via Database
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#converting-jars-to-osgi-bundles" title="Converting Jars to OSGi Bundles" class="md-nav__link">
    Converting Jars to OSGi Bundles
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Community
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Community
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="/community/" title="Community" class="md-nav__link">
      Community
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/source/" title="Source" class="md-nav__link">
      Source
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/build/" title="Build" class="md-nav__link">
      Build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      License
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        License
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="/license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
    </ul>
  </nav>  
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">On this page</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuring-databases" title="Configuring Databases" class="md-nav__link">
    Configuring Databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-periodic-state-persistence" title="Configuring Periodic State Persistence" class="md-nav__link">
    Configuring Periodic State Persistence
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#persistence-on-database" title="Persistence on Database" class="md-nav__link">
    Persistence on Database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistence-on-file-system" title="Persistence on File System" class="md-nav__link">
    Persistence on File System
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-siddhi-elements" title="Configuring Siddhi Elements" class="md-nav__link">
    Configuring Siddhi Elements
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-sources-sinks-and-stores" title="Configuring Sources, Sinks and Stores" class="md-nav__link">
    Configuring Sources, Sinks and Stores
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-extensions" title="Configuring Extensions" class="md-nav__link">
    Configuring Extensions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-authentication" title="Configuring Authentication" class="md-nav__link">
    Configuring Authentication
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-extensions-and-third-party-dependencies" title="Adding Extensions and Third Party Dependencies" class="md-nav__link">
    Adding Extensions and Third Party Dependencies
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-to-siddhi-java-program" title="Adding to Siddhi Java Program" class="md-nav__link">
    Adding to Siddhi Java Program
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-to-siddhi-local-microservice" title="Adding to Siddhi Local Microservice" class="md-nav__link">
    Adding to Siddhi Local Microservice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-to-siddhi-docker-microservice" title="Adding to Siddhi Docker Microservice" class="md-nav__link">
    Adding to Siddhi Docker Microservice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-to-siddhi-kubernetes-microservice" title="Adding to Siddhi Kubernetes Microservice" class="md-nav__link">
    Adding to Siddhi Kubernetes Microservice
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-statistics" title="Configuring Statistics" class="md-nav__link">
    Configuring Statistics
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reporting-via-jmx-mbeans" title="Reporting via JMX Mbeans" class="md-nav__link">
    Reporting via JMX Mbeans
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reporting-via-console" title="Reporting via Console" class="md-nav__link">
    Reporting via Console
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reporting-via-database" title="Reporting via Database" class="md-nav__link">
    Reporting via Database
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#converting-jars-to-osgi-bundles" title="Converting Jars to OSGi Bundles" class="md-nav__link">
    Converting Jars to OSGi Bundles
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
  
                
                  <a href="https://github.com/siddhi-io/www/edit/v5.0/en/docs/docs/config-guide.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="siddhi-50-config-guide">Siddhi 5.0 Config Guide<a class="headerlink" href="#siddhi-50-config-guide" title="Permanent link">&para;</a></h1>
<p>This section covers the following.</p>
<ul>
<li><a href="#configuring-databases">Configuring Databases</a></li>
<li><a href="#configuring-periodic-state-persistence">Configuring Periodic State Persistence</a></li>
<li><a href="#configuring-siddhi-elements">Configuring Siddhi Sources, Sinks, Stores and Extensions</a></li>
<li><a href="#configuring-authentication">Configuring Authentication</a></li>
<li><a href="#adding-extensions-and-third-party-dependencies">Adding Extensions and Third Party Dependencies</a></li>
<li><a href="#configuring-statistics">Configuring Statistics</a></li>
<li><a href="#converting-jars-to-osgi-bundles">Converting Jars to OSGi Bundles</a></li>
</ul>
<h2 id="configuring-databases">Configuring Databases<a class="headerlink" href="#configuring-databases" title="Permanent link">&para;</a></h2>
<div class="admonition info">
<p class="admonition-title">Applicable only for Local, Docker, and Kubernetes modes.</p>
<p>This section is not applicable for Java and Python modes.</p>
</div>
<p>It is recommended to configure RDBMS databases as datasources under <code>wso2.datasources</code> section of Siddhi configuration yaml, and pass it during startup, this will allow database to reuse connections across multiple Siddhi Apps.</p>
<p>By default Siddhi stores product-specific data in predefined embedded H2 database located in <code>&lt;SIDDHI_RUNNER_HOME&gt;/wso2/runner/database</code> directory. Here, the default H2 database is only suitable for development, testing, and some production environments which do not store data.</p>
<p>However, for most production environments we recommend using industry-standard RDBMS such as Oracle, PostgreSQL, MySQL, or MSSQL. In this case users are expected to add the relevant database drivers to Siddhi's class-path.</p>
<div class="admonition note">
<p class="admonition-title">Including database drivers.</p>
<p>The database driver corresponding to the database should be an OSGi bundle and it need to be added to <code>&lt;SIDDHI_RUNNER_HOME&gt;/lib/</code> directory. If the driver is a jar then this should be <a href="#converting-jars-to-osgi-bundles">converted to an OSGi bundle before adding</a>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Converting Non OSGi drivers.</p>
<p>If the database driver is not an OSGi bundle, then it should be converted to OSGi. Please refer <a href="#converting-jars-to-osgi-bundles">Converting Jars to OSGi Bundles</a> documentation for details.</p>
</div>
<p>The necessary table schemas are self generated by the features themselves, other than the tables needed for <a href="#reporting-via-database">statistics reporting via databases</a>.</p>
<p><strong>Below are the sample datasource configuration for each supported database types:</strong></p>
<ul>
<li>
<p>MySQL<br />
  <pre class="codehilite"><code class="language-yaml linenums">wso2.datasources:
 dataSources:
   - name: SIDDHI_TEST_DB
     description: The datasource used for test database
     jndiConfig:
       name: jdbc/SIDDHI_TEST_DB
     definition:
       type: RDBMS
       configuration:
         jdbcUrl: jdbc:mysql://hostname:port/testdb
         username: root
         password: root
         driverClassName: com.mysql.jdbc.Driver
         maxPoolSize: 50
         idleTimeout: 60000
         connectionTestQuery: SELECT 1
         validationTimeout: 30000
         isAutoCommit: false </code></pre></p>
</li>
<li>
<p>Oracle<br />
  There are two ways to configure Oracle. If you have a System Identifier (SID), such as <br />
  <pre class="codehilite"><code class="linenums">jdbc:oracle:thin:@[HOST][:PORT]:SID</code></pre>
  Use this (older) format:
  <pre class="codehilite"><code class="language-yaml linenums">wso2.datasources:
 dataSources:
   - name: SIDDHI_TEST_DB
     description: The datasource used for test database
     jndiConfig:
       name: jdbc/SIDDHI_TEST_DB
     definition:
       type: RDBMS
       configuration:
         jdbcUrl: jdbc:oracle:thin:@hostname:port:SID
         username: testdb
         password: root
         driverClassName: oracle.jdbc.driver.OracleDriver
         maxPoolSize: 50
         idleTimeout: 60000
         connectionTestQuery: SELECT 1
         validationTimeout: 30000
         isAutoCommit: false</code></pre>
  If you have an Oracle service name, such as 
  <pre class="codehilite"><code class="linenums">jdbc:oracle:thin:@//[HOST][:PORT]/SERVICE</code></pre>
  Use this (newer) format:
  <pre class="codehilite"><code class="language-yaml linenums">wso2.datasources:
 dataSources:
   - name: SIDDHI_TEST_DB
     description: The datasource used for test database
     jndiConfig:
       name: jdbc/SIDDHI_TEST_DB
     definition:
       type: RDBMS
       configuration:
         jdbcUrl: jdbc:oracle:thin:@hostname:port/SERVICE
         username: testdb
         password: root
         driverClassName: oracle.jdbc.driver.OracleDriver
         maxPoolSize: 50
         idleTimeout: 60000
         connectionTestQuery: SELECT 1
         validationTimeout: 30000
         isAutoCommit: false</code></pre></p>
</li>
<li>
<p>PostgreSQL
  <pre class="codehilite"><code class="language-yaml linenums">wso2.datasources:
 dataSources:
   - name: SIDDHI_TEST_DB
     description: The datasource used for test database
     jndiConfig:
       name: jdbc/SIDDHI_TEST_DB
     definition:
       type: RDBMS
       configuration:
         jdbcUrl: jdbc:postgresql://hostname:port/testdb
         username: root
         password: root
         driverClassName: org.postgresql.Driver
         maxPoolSize: 10
         idleTimeout: 60000
         connectionTestQuery: SELECT 1
         validationTimeout: 30000
         isAutoCommit: false</code></pre></p>
</li>
<li>
<p>MSSQL
  <pre class="codehilite"><code class="language-yaml linenums">wso2.datasources:
 dataSources:
   - name: SIDDHI_TEST_DB
     description: The datasource used for test database
     jndiConfig:
       name: jdbc/SIDDHI_TEST_DB
     definition:
       type: RDBMS
       configuration:
         jdbcUrl: jdbc:sqlserver://hostname:port;databaseName=testdb
         username: root
         password: root
         driverClassName: com.microsoft.sqlserver.jdbc.SQLServerDriver
         maxPoolSize: 50
         idleTimeout: 60000
         connectionTestQuery: SELECT 1
         validationTimeout: 30000
         isAutoCommit: false</code></pre></p>
</li>
</ul>
<h2 id="configuring-periodic-state-persistence">Configuring Periodic State Persistence<a class="headerlink" href="#configuring-periodic-state-persistence" title="Permanent link">&para;</a></h2>
<div class="admonition info">
<p class="admonition-title">Applicable only for Local, Docker, and Kubernetes modes.</p>
<p>This section is not applicable for Java and Python modes.</p>
</div>
<p>This explains how to periodically persisting the state of Siddhi either into a database system or file system, in order to prevent data losses that can result from a system failure.</p>
<h3 id="persistence-on-database">Persistence on Database<a class="headerlink" href="#persistence-on-database" title="Permanent link">&para;</a></h3>
<p>To perform periodic state persistence on a database, the database should be configured as a datasource and the relevant jdbc drivers should be added to Siddhi's class-path. Refer <a href="#database-configuration/">Database Configuration</a> section for more information.</p>
<p>To configure database based periodic data persistence, add <code>state.persistence</code> section with the following properties on the Siddhi configuration yaml, and pass that during startup.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Purpose</th>
<th>Required Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>enabled</td>
<td>This enables data persistence.</td>
<td>true</td>
</tr>
<tr>
<td>intervalInMin</td>
<td>The time interval in minutes that defines the interval in which state of Siddhi applications should be persisted</td>
<td>1</td>
</tr>
<tr>
<td>revisionsToKeep</td>
<td>The number of revisions to keep in the system. Here when a new persistence takes place, the older revisions are removed.</td>
<td>3</td>
</tr>
<tr>
<td>persistenceStore</td>
<td>The persistence store</td>
<td>io.siddhi.distribution.core.persistence.DBPersistenceStore</td>
</tr>
<tr>
<td>config &gt; datasource</td>
<td>The datasource to be used in persisting the state. The datasource should be defined in the Siddhi configuration yaml. For detailed instructions of how to configure a datasource, see <a href="#database-configuration/">Database Configuration</a>.</td>
<td>SIDDHI_PERSISTENCE_DB (A datasource that is defined in <code>wso2.datasources</code> in Siddhi configuration yaml)</td>
</tr>
<tr>
<td>config &gt; table</td>
<td>The table that should be created and used for persisting states.</td>
<td>PERSISTENCE_TABLE</td>
</tr>
</tbody>
</table>
<p>The following is a sample configuration for database based state persistence.</p>
<pre class="codehilite"><code class="language-yaml linenums">state.persistence:
  enabled: true
  intervalInMin: 1
  revisionsToKeep: 3
  persistenceStore: io.siddhi.distribution.core.persistence.DBPersistenceStore
  config:
    datasource: &lt;DATASOURCE NAME&gt;   # A datasource with this name should be defined in wso2.datasources namespace
    table: &lt;TABLE NAME&gt;</code></pre>

<h3 id="persistence-on-file-system">Persistence on File System<a class="headerlink" href="#persistence-on-file-system" title="Permanent link">&para;</a></h3>
<p>To configure file system based periodic data persistence, add <code>state.persistence</code> section with the following properties on the Siddhi configuration yaml, and pass that during startup.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Purpose</th>
<th>Required Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>enabled</td>
<td>This enables data persistence.</td>
<td>true</td>
</tr>
<tr>
<td>intervalInMin</td>
<td>The time interval in minutes that defines the interval in which state of Siddhi applications should be persisted</td>
<td>1</td>
</tr>
<tr>
<td>revisionsToKeep</td>
<td>The number of revisions to keep in the system. Here when a new persistence takes place, the older revisions are removed.</td>
<td>3</td>
</tr>
<tr>
<td>persistenceStore</td>
<td>The persistence store</td>
<td>io.siddhi.distribution.core.persistence.FileSystemPersistenceStore</td>
</tr>
<tr>
<td>config &gt; location</td>
<td>A fully qualified folder location to where the revision files should be persisted.</td>
<td>siddhi-app-persistence</td>
</tr>
</tbody>
</table>
<p>The following is a sample configuration for file system based state persistence.</p>
<pre class="codehilite"><code class="language-yaml linenums">state.persistence:
  enabled: true
  intervalInMin: 1
  revisionsToKeep: 2
  persistenceStore: io.siddhi.distribution.core.persistence.FileSystemPersistenceStore
  config:
    location: siddhi-app-persistence</code></pre>

<h2 id="configuring-siddhi-elements">Configuring Siddhi Elements<a class="headerlink" href="#configuring-siddhi-elements" title="Permanent link">&para;</a></h2>
<div class="admonition info">
<p class="admonition-title">Applicable only for Local, Docker, and Kubernetes modes.</p>
<p>This section is not applicable for Java and Python modes.</p>
</div>
<p>You can configure some of there environment specific configurations in the Siddhi Configuration yaml rather than configuring in-line, such that your Siddhi Application can become potable between environments.</p>
<h3 id="configuring-sources-sinks-and-stores">Configuring Sources, Sinks and Stores<a class="headerlink" href="#configuring-sources-sinks-and-stores" title="Permanent link">&para;</a></h3>
<p>Multiple sources, sinks, and stores could be defined in Siddhi Configuration yaml as <code>ref</code>, and referred by several Siddhi Applications as described below.</p>
<p>The following is the syntax for the configuration.
<pre class="codehilite"><code class="linenums">siddhi:
  refs:
    -
      ref:
        name: '&lt;name&gt;'
        type: '&lt;type&gt;'
        properties:
          &lt;property1&gt;: &lt;value1&gt;
          &lt;property2&gt;: &lt;value2&gt;</code></pre>
For each separate refs you want to configure, add a sub-section named <code>ref</code> under the <code>refs</code> subsection.</p>
<p>The ref configured in Siddhi Configuration yaml can be referred from a Siddhi Application <a href="../query-guide/#source">Source</a> as follows.
<pre class="codehilite"><code class="linenums">@Source(ref='&lt;name&gt;',
        @map(type='json', @attributes( name='$.name', amount='$.quantity')))
define stream SweetProductionStream (name string, amount double);</code></pre>
Similarly <a href="../query-guide/#sink">Sinks</a> and <a href="../query-guide/#store">Store Tables</a> can also be configured and referred from Siddhi Apps.</p>
<p>For each separate refs you want to configure, add a sub-section named <code>ref</code> under the <code>refs</code> subsection.</p>
<p><strong>Example</strong>: Configuring http source using <code>ref</code></p>
<p>Following configuration defines the <code>url</code> and details about <code>basic.auth</code>, in the Siddhi Configuration yaml.
<pre class="codehilite"><code class="linenums">siddhi:
  refs:
    -
      ref:
        name: 'http-passthrough'
        type: 'http'
        properties:
          receiver.url: 'http://0.0.0.0:8008/sweet-production'
          basic.auth.enabled: false</code></pre></p>
<p>This can be referred in the Siddhi Applications as follows.</p>
<pre class="codehilite"><code class="linenums">@Source(ref='http-passthrough',
        @map(type='json', @attributes( name='$.name', amount='$.quantity')))
define stream SweetProductionStream (name string, amount double);</code></pre>

<h3 id="configuring-extensions">Configuring Extensions<a class="headerlink" href="#configuring-extensions" title="Permanent link">&para;</a></h3>
<p>Siddhi extensions cater use-case specific logic that is not available by default in Siddhi. Some of these extensions have system parameter configurations to define/modify their behavior. These extensions usually have default values for the parameters, but when needed, they can be overridden by configuring the parameters in Siddhi Configuration yaml and passing it at startup.</p>
<p>The following is the syntax for the configuration.
<pre class="codehilite"><code class="linenums">siddhi:
  extensions:
    -
      extension:
        name: &lt;extension name&gt;
        namespace: &lt;extension namespace&gt;
        properties:
          &lt;key&gt;: &lt;value&gt;</code></pre>
For each separate extension you want to configure, add a sub-section named <code>extension</code> under the <code>extensions</code> subsection.</p>
<p>Following are some examples on overriding default system properties via Siddhi Configuration yaml</p>
<p><strong>Example 1</strong>: Defining service host and port for the TCP source
<pre class="codehilite"><code class="linenums">siddhi:
  extensions:
    - extension:
        name: tcp
        namespace: source
        properties:
          host: 0.0.0.0
          port: 5511</code></pre>
<strong>Example 2</strong>: Overwriting the default RDBMS extension configuration
<pre class="codehilite"><code class="linenums">siddhi:
  extensions:
    - extension:
        name: rdbms
        namespace: store
        properties:
          mysql.batchEnable: true
          mysql.batchSize: 1000
          mysql.indexCreateQuery: "CREATE INDEX {{TABLE_NAME}}_INDEX ON {{TABLE_NAME}} ({{INDEX_COLUMNS}})"
          mysql.recordDeleteQuery: "DELETE FROM {{TABLE_NAME}} {{CONDITION}}"
          mysql.recordExistsQuery: "SELECT 1 FROM {{TABLE_NAME}} {{CONDITION}} LIMIT 1"</code></pre></p>
<h2 id="configuring-authentication">Configuring Authentication<a class="headerlink" href="#configuring-authentication" title="Permanent link">&para;</a></h2>
<div class="admonition info">
<p class="admonition-title">Applicable only for Local, Docker, and Kubernetes modes.</p>
<p>This section is not applicable for Java and Python modes.</p>
</div>
<p>By default, Siddhi is configured with user name <code>admin</code>, and password <code>admin</code>. This can be updated by adding related user management configuration as <code>auth.configs</code> to the Siddhi Configuration yaml, and pass it at startup.</p>
<p>A sample <code>auth.configs</code> is as follows.</p>
<pre class="codehilite"><code class="linenums"># Authentication configuration
auth.configs:
  type: 'local'        # Type of the IdP client used
  userManager:
    adminRole: admin   # Admin role which is granted all permissions
    userStore:         # User store
      users:
       -
         user:
           username: admin
           password: YWRtaW4=
           roles: 1
      roles:
       -
         role:
           id: 1
           displayName: admin</code></pre>

<h2 id="adding-extensions-and-third-party-dependencies">Adding Extensions and Third Party Dependencies<a class="headerlink" href="#adding-extensions-and-third-party-dependencies" title="Permanent link">&para;</a></h2>
<div class="admonition info">
<p class="admonition-title">Applicable for all modes.</p>
</div>
<p>For certain use-cases, Siddhi might require extensions and/or third party dependencies to fulfill some characteristics that it does not provide by default.</p>
<p>This section provides details on how to add or update extension and/or third party dependencies that is needed by Siddhi.</p>
<h3 id="adding-to-siddhi-java-program">Adding to Siddhi Java Program<a class="headerlink" href="#adding-to-siddhi-java-program" title="Permanent link">&para;</a></h3>
<p>When running Siddhi as a Java library, the extension jars and/or third-party dependencies needed for Siddhi can be simply added to Siddhi class-path. When Maven is used as the build tool add them to the <code>pom.xml</code> file along with the other mandatory jars needed by Siddhi as given is <a href="../siddhi-as-a-java-library/">Using Siddhi as a library</a> guide.</p>
<p>A sample on adding <code>siddhi-io-http</code> extension to the Maven <code>pom.xml</code> is as follows.</p>
<pre class="codehilite"><code class="language-xml linenums">&lt;!--HTTP extension--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.wso2.extension.siddhi.io.http&lt;/groupId&gt;
  &lt;artifactId&gt;siddhi-io-http&lt;/artifactId&gt;
  &lt;version&gt;${siddhi.io.http.version}&lt;/version&gt;
&lt;/dependency&gt;   </code></pre>

<p>Refer <a href="../siddhi-as-a-java-library/">guide</a> for more details on using Siddhi as a Java Library.</p>
<h3 id="adding-to-siddhi-local-microservice">Adding to Siddhi Local Microservice<a class="headerlink" href="#adding-to-siddhi-local-microservice" title="Permanent link">&para;</a></h3>
<p>The most used Siddhi extensions are packed by default with the Siddhi Local Microservice distribution.</p>
<p>To add or update Siddhi extensions and/or third-party dependencies, adding or replacing the relevant OSGi JARs in <code>&lt;SIDDHI_RUNNER_HOME&gt;/lib</code> directory.</p>
<p>Since Local Microservice is OSGi-based, when adding libraries/drivers they need to be checked if they are OSGi bundles, and if not convert to OSGi before adding them to the <code>&lt;SIDDHI_RUNNER_HOME&gt;/lib</code> directory.</p>
<div class="admonition tip">
<p class="admonition-title">Converting Jars to OSGi Bundles..</p>
<p>If the database driver is not an OSGi bundle, then it should be converted to OSGi. Please refer <a href="#converting-jars-to-osgi-bundles">Converting Jars to OSGi Bundles</a> documentation for details.</p>
</div>
<p>Refer <a href="../siddhi-as-a-local-microservice/">guide</a> for more details on using Siddhi as Local Microservice.</p>
<h3 id="adding-to-siddhi-docker-microservice">Adding to Siddhi Docker Microservice<a class="headerlink" href="#adding-to-siddhi-docker-microservice" title="Permanent link">&para;</a></h3>
<p>The most used Siddhi extensions are packed by default with the Siddhi Docker Microservice distribution.</p>
<p>To add or update Siddhi extensions and/or third-party dependencies, a new docker image has to be built from either <a href="https://hub.docker.com/r/siddhiio/siddhi-runner-base-ubuntu">siddhi-runner-base-ubuntu</a> or <a href="https://hub.docker.com/r/siddhiio/siddhi-runner-base-alpine">siddhi-runner-base-alpine</a> images. These images contain Linux OS, JDK and the Siddhi distribution.</p>
<p>Sample docker file using <code>siddhi-runner-base-alpine</code> is as follows.
<pre class="codehilite"><code class="language-docker linenums"># use siddhi-runner-base
FROM siddhiio/siddhi-runner-base-alpine:5.1.0-m2
MAINTAINER Siddhi IO Docker Maintainers "siddhi-dev@googlegroups.com"

ARG HOST_BUNDLES_DIR=./files/bundles
ARG HOST_JARS_DIR=./files/jars
ARG JARS=${RUNTIME_SERVER_HOME}/jars
ARG BUNDLES=${RUNTIME_SERVER_HOME}/bundles

# copy entrypoint bash script to user home
COPY --chown=siddhi_user:siddhi_io init.sh ${WORKING_DIRECTORY}/

# copy bundles &amp; jars to the siddhi-runner distribution
COPY --chown=siddhi_user:siddhi_io ${HOST_BUNDLES_DIR}/ ${BUNDLES}
COPY --chown=siddhi_user:siddhi_io ${HOST_JARS_DIR}/ ${JARS}

# expose ports
EXPOSE 9090 9443 9712 9612 7711 7611 7070 7443

RUN bash ${RUNTIME_SERVER_HOME}/bin/install-jars.sh

STOPSIGNAL SIGINT

ENTRYPOINT ["/home/siddhi_user/init.sh",  "--"]</code></pre></p>
<p>Find the necessary artifacts to build the docker from <a href="https://github.com/siddhi-io/docker-siddhi/tree/master/docker-files/siddhi-runner">docker-siddhi</a> repository.</p>
<p>The necessary OSGi jars and extensions that need to be added to the Siddhi Docker Microservice should be placed at ${BUNDLE_JAR_DIR} (<code>./files/lib</code>) folder as defined in the above docker file, such that they would be bundled during the docker build phase.</p>
<div class="admonition tip">
<p class="admonition-title">Converting Jars to OSGi Bundles</p>
<p>If the database driver is not an OSGi bundle, then it should be converted to OSGi. Please refer <a href="#converting-jars-to-osgi-bundles">Converting Jars to OSGi Bundles</a> documentation for details.</p>
</div>
<p>Refer <a href="../siddhi-as-a-docker-microservice/">guide</a> for more details on using Siddhi as Docker Microservice.</p>
<h3 id="adding-to-siddhi-kubernetes-microservice">Adding to Siddhi Kubernetes Microservice<a class="headerlink" href="#adding-to-siddhi-kubernetes-microservice" title="Permanent link">&para;</a></h3>
<p>To add or update Siddhi extensions and/or third-party dependencies, a custom docker image has to be created using the steps described in <a href="#adding-to-siddhi-docker-microservice">Adding to Siddhi Docker Microservice</a> documentation including the necessary extensions and dependencies. The created image can be then referenced in the <code>sepc.pod</code> subsection in the <code>SiddhiProcess</code> Kubernetes artifact created to deploy Siddhi in Kubernetes.</p>
<p>For details on creating the Kubernetes artifacts refer <a href="../siddhi-as-a-kubernetes-microservice/">Using Siddhi as Kubernetes Microservice</a> documentation.</p>
<h2 id="configuring-statistics">Configuring Statistics<a class="headerlink" href="#configuring-statistics" title="Permanent link">&para;</a></h2>
<div class="admonition info">
<p class="admonition-title">Applicable only for Local, Docker, and Kubernetes modes.</p>
<p>This section is not applicable for Java and Python modes.</p>
</div>
<p>Siddhi uses <a href="https://metrics.dropwizard.io/">dropwizard</a> metrics library to calculate Siddhi and JVM statistics, and it can report the results via JMX Mbeans, console or database.</p>
<p>To enable statistics, the relevant configuration should be added to the Siddhi Configuration yaml as follows, and at the same time the statistics collection should be enabled in the Siddhi Application which is being monitored. Refer <a href="../query-guide/#statistics">Siddhi Application Statistics</a> documentation for enabling Siddhi Application level statistics.</p>
<p>To enable statistics the relevant matrics related configurations should be added under <code>wso2.metrics</code> section in the Siddhi Configurations yaml file, and pass that during startup.</p>
<div class="admonition note">
<p class="admonition-title">Configuring Metrics reporting level.</p>
<p>To modify the statistics reporting, relevant metric names can be added under the <code>wso2.metrics.levels</code> subsection in the Siddhi Configurations yaml, along with the matrics level (i.e., OFF, INFO, DEBUG, TRACE, or ALL) as given below.
<pre>
wso2.metrics:
  # Metrics Levels are organized from most specific to least:
  # OFF (most specific, no metrics)
  # INFO
  # DEBUG
  # TRACE (least specific, a lot of data)
  # ALL (least specific, all data)
  levels:
    # The root level configured for Metrics
    rootLevel: INFO
    # Metric Levels
    levels:
      jvm.buffers: 'OFF'
      jvm.class-loading: INFO
      jvm.gc: DEBUG
      jvm.memory: INFO</p>
</pre>

</div>
<p>The available metrics reporting options are as follows.</p>
<h3 id="reporting-via-jmx-mbeans">Reporting via JMX Mbeans<a class="headerlink" href="#reporting-via-jmx-mbeans" title="Permanent link">&para;</a></h3>
<p>JMX Mbeams is the default statistics reporting option of Siddhi. To enable stats with the default configuration add the metric-related properties under <code>wso2.metrics</code> section in the Siddhi Configurations yaml file, and pass that during startup.</p>
<p>A sample configuration is as follows.
<pre class="codehilite"><code class="linenums">wso2.metrics:
  enabled: true</code></pre>
This will report JMX Mbeans in the name of <code>org.wso2.carbon.metrics</code>. However, in this default configuration the JVM metrics will not be measured.</p>
<p>A detail JMX configuration along with the metrics reporting level is as follows.</p>
<pre class="codehilite"><code class="linenums">wso2.metrics:
  # Enable Metrics
  enabled: true
  jmx:
    # Register MBean when initializing Metrics
    registerMBean: true
    # MBean Name
    name: org.wso2.carbon:type=Metrics
  # Metrics Levels are organized from most specific to least:
  # OFF (most specific, no metrics)
  # INFO
  # DEBUG
  # TRACE (least specific, a lot of data)
  # ALL (least specific, all data)
  levels:
    # The root level configured for Metrics
    rootLevel: INFO
    # Metric Levels
    levels:
      jvm.buffers: 'OFF'
      jvm.class-loading: INFO
      jvm.gc: DEBUG
      jvm.memory: INFO</code></pre>

<h3 id="reporting-via-console">Reporting via Console<a class="headerlink" href="#reporting-via-console" title="Permanent link">&para;</a></h3>
<p>To enable statistics by periodically printing the metrics on console add the following configuration to the the Siddhi Configurations yaml file, and pass that during startup.</p>
<pre class="codehilite"><code class="linenums"># This is the main configuration for metrics
wso2.metrics:
  # Enable Metrics
  enabled: false
  reporting:
    console:
      - # The name for the Console Reporter
        name: Console
        # Enable Console Reporter
        enabled: false
        # Polling Period in seconds.
        # This is the period for polling metrics from the metric registry and printing in the console
        pollingPeriod: 5</code></pre>

<h3 id="reporting-via-database">Reporting via Database<a class="headerlink" href="#reporting-via-database" title="Permanent link">&para;</a></h3>
<p>To enable JDBC reporting and to periodically clean up the outdated statistics from the database, first a datasource should be created with the relevant database configurations and then the related metrics properties as given below should be added to in the Siddhi Configurations yaml file, and pass that during startup.</p>
<p>The below sample is referring to the datasource with JNDI name <code>jdbc/SiddhiMetricsDB</code>, hence the datasource configuration in yaml should have <code>jndiConfig.name</code> as <code>jdbc/SiddhiMetricsDB</code>. For detailed instructions on configuring a datasource, refer <a href="#configuring-databases">Configuring Databases</a>.</p>
<p>. The scripts to create these tables are provided in the <code>&lt;SIDDHI_RUNNER_HOME&gt;/wso2/runner/dbscripts</code> directory.</p>
<p>Sample configuration of reporting via database.</p>
<pre class="codehilite"><code class="linenums">wso2.metrics:
  # Enable Metrics
  enabled: true
  jdbc:
  # Data Source Configurations for JDBC Reporters
    dataSource:
      # Default Data Source Configuration
      - &amp;JDBC01
        # JNDI name of the data source to be used by the JDBC Reporter.
        # This data source should be defined under wso2.datasources.
        dataSourceName: java:comp/env/jdbc/SiddhiMetricsDB
        # Schedule regular deletion of metrics data older than a set number of days.
        # It is recommended that you enable this job to ensure your metrics tables do not get extremely large.
        # Deleting data older than seven days should be sufficient.
        scheduledCleanup:
          # Enable scheduled cleanup to delete Metrics data in the database.
          enabled: false
          # The scheduled job will cleanup all data older than the specified days
          daysToKeep: 7
          # This is the period for each cleanup operation in seconds.
          scheduledCleanupPeriod: 86400
  reporting:
    jdbc:
      - # The name for the JDBC Reporter
        name: JDBC
        # Enable JDBC Reporter
        enabled: true
        # Source of Metrics, which will be used to identify each metric in database --&gt;
        # Commented to use the hostname by default
        # source: Siddhi
        # Alias referring to the Data Source configuration
        dataSource: *JDBC01
        # Polling Period in seconds.
        # This is the period for polling metrics from the metric registry and updating the database with the values
        pollingPeriod: 60      </code></pre>

<div class="admonition note">
<p class="admonition-title">Metrics history and reporting interval</p>
<p>If the <code>wso2.metrics.reporting.jdbc</code> subsection is not enabled, the information relating to metrics history will not be persisted for future references. Also note the that the reporting will only start to update the database after the given <code>pollingPeriod</code> time has elapsed.  </p>
</div>
<p>Information about the parameters configured under the <code>jdbc.dataSource</code> subsection in the Siddhi Configuration yaml is as follows.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Default Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>dataSourceName</td>
<td><code>java:comp/env/jdbc/SiddhiMetricsDB</code></td>
<td><code>java:comp/env/&lt;datasource JNDI name&gt;</code>. The JNDI name of the datasource used to store metric data.</td>
</tr>
<tr>
<td>scheduledCleanup.enabled</td>
<td>false</td>
<td>If this is set to true, metrics data stored in the database is cleared periodically based on scheduled time interval.</td>
</tr>
<tr>
<td>scheduledCleanup.daysToKeep</td>
<td>3</td>
<td>If scheduled clean-up of metric data is enabled, all metric data in the database that are older than the number of days specified in this parameter are deleted.</td>
</tr>
<tr>
<td>scheduledCleanup.scheduledCleanupPeriod</td>
<td>86400</td>
<td>The parameter specifies the time interval in seconds at which metric data should be cleaned.</td>
</tr>
</tbody>
</table>
<h2 id="converting-jars-to-osgi-bundles">Converting Jars to OSGi Bundles<a class="headerlink" href="#converting-jars-to-osgi-bundles" title="Permanent link">&para;</a></h2>
<p>To convert jar files to OSGi bundles, first download and save the non-OSGi jar it in a preferred directory in your machine. Then from the CLI, navigate to the <code>&lt;SIDDHI_RUNNER_HOME&gt;/bin</code> directory, and issue the following command.</p>
<pre class="codehilite"><code class="linenums">./jartobundle.sh &lt;path to non OSGi jar&gt; ../lib</code></pre>

<p>This converts the Jar to OSGi bundles and place it in <code>&lt;SIDDHI_RUNNER_HOME&gt;/lib</code> directory.</p>
                
                  
                
              
  <a href="#" class="cd-top text--replace js-cd-top">Top</a>

              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../siddhi-as-a-kubernetes-microservice/" title="Siddhi Kubernetes Microservice" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Siddhi Kubernetes Microservice
              </span>
            </div>
          </a>
        
        
          <a href="../../development/" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Introduction
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Siddhi - Documentation
          </div>
        
        &copy;2019 <a href="https://wso2.com/">WSO2</a>
      </div>
      
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="/community/#community-collaboration" class="md-footer-social__link fa fa-slack"></a>
    
      <a href="https://github.com/siddhi-io/siddhi" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://medium.com/siddhi-io" class="md-footer-social__link fa fa-medium"></a>
    
      <a href="https://twitter.com/siddhi_io" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.youtube.com/channel/UCZT5sE-0g22GuvWQu7ezVqg" class="md-footer-social__link fa fa-youtube"></a>
    
      <a href="https://www.linkedin.com/groups/13553064" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../assets/lib/highlightjs/highlight.min.js"></script>
      
        <script src="../../assets/js/theme.js"></script>
      
        <script src="../../assets/lib/backtotop/js/util.js"></script>
      
        <script src="../../assets/lib/backtotop/js/main.js"></script>
      
    
  </body>
</html>